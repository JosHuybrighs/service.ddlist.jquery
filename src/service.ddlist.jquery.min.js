!function(t,s,i,e){function d(s,i){this.element=s,this.selObj=t(s),this.isOpen=!1,this.settings={width:260,selectionIndex:0,disabled:!1,showSelectionTextOnly:!1,hideTopSelectedElement:!1,onSelectedOnInit:!1,onSelected:function(t,s,i){},itemsSource:null},this._init(i)}var n="ddlist";d.prototype={_selectIndex:function(t){this.ddOptions.find("a").removeClass("ddListOptionIsSelected");var s=this.ddOptions.find("a").eq(t);s.addClass("ddListOptionIsSelected");var i=this.options[t];if(this.selectedIndex=t,this.selectedValue=i.value,this.selectedText=i.text,null==this.settings.itemsSource){this.selObj.find("option").attr("selected",!1);var e=this.selObj.find("option").eq(t);e.attr("selected",!0)}this.settings.showSelectionTextOnly?this.ddSelection.html(i.text):this.ddSelection.html((i.imageSrc?'<img src="'+i.imageSrc+'" />':"")+(i.text?"<label>"+i.text+"</label>":"")+(i.description?"<small>"+i.description+"</small>":""))},_open:function(){var s=t(".ddListIsOpen").not(this.ddListObj);0!=s.length&&(s.removeClass("ddListIsOpen"),s.find("> ul").slideUp(50)),this.settings.hideTopSelectedElement&&this.ddListObj.addClass("topElementIsHidden"),this.ddListObj.find("> ul").slideDown("fast"),this.ddListObj.addClass("ddListIsOpen"),this.isOpen=!0},_close:function(){this.ddListObj.removeClass("ddListIsOpen"),this.ddListObj.find("> ul").slideUp(50),this.ddListObj.find("> a").show(),this.ddListObj.removeClass("topElementIsHidden"),this.isOpen=!1},_enable:function(){var s=this;this.settings.disabled=!1,this.ddListObj.removeClass("ddListDisabled"),this.ddSelection.parent().on("click.ddlist",function(t){s.isOpen?s._close():s._open(),t.stopPropagation()}),this.ddOptions.find("a").on("click.ddlist",function(i){s._selectIndex(t(this).closest("li").index()),s._close(),s.settings.onSelected.call(s,s.selectedIndex,s.selectedValue,s.selectedText),i.stopPropagation()}),this.ddListObj.on("click.ddlist",function(t){t.stopPropagation()}),t("body").on("click.ddlist-"+this.selObj.attr("id"),function(){s._close()})},_disable:function(){this.settings.disabled=!0,t("body").off(".ddlist-"+this.selObj.attr("id")),this.ddListObj.off(".ddlist"),this.ddOptions.find("a").off(".ddlist"),this.ddSelection.parent().off(".ddlist"),this.ddListObj.addClass("ddListDisabled")},_bindListItems:function(s){var i=this;t.each(this.options,function(t,s){s.selected&&(i.settings.selectionIndex=t),i.ddOptions.append("<li><a>"+(s.imageSrc?' <img src="'+s.imageSrc+'" />':"")+(s.text?" <label>"+s.text+"</label>":"")+(s.description?" <small>"+s.description+"</small>":"")+"</a></li>")}),s?this.ddListObj.addClass("ddListDisabled"):this._enable(),this._selectIndex(this.settings.selectionIndex),this.settings.onSelectedOnInit&&this.settings.onSelected.call(this,this.selectedIndex,this.selectedValue,this.selectedText)},_unbindListItems:function(){this._disable(),this.ddOptions.empty()},_init:function(s){this.isOpen=!1,this.settings=t.extend({},this.settings,s);var i=this;this.options=[],null==this.settings.itemsSource?this.selObj.find("option").each(function(){var s=t(this);i.options.push({text:t.trim(s.text()),value:s.val(),selected:"selected"==s.attr("selected"),description:s.data("description"),imageSrc:s.data("imagesrc")})}):this.options=this.settings.itemsSource,this.selObj.hide(),this.ddListObj=t('<div id="ddList-'+this.selObj.attr("id")+'" class="ddListContainer"><a></a><span class="ddListArrow"></span><ul></ul></div>'),this.ddListObj.insertAfter(this.selObj),this.ddSelection=this.ddListObj.find("> a"),this.ddSelection.css({width:this.settings.width}),this.ddOptions=this.ddListObj.find("> ul"),this.ddOptions.css({width:this.settings.width}),this.settings.disabled||(this.settings.disabled=this.selObj.is(":disabled")),this._bindListItems(this.settings.disabled)},select:function(t){var s=t[0];if(s.index)this.settings.selectionIndex=s.index,this._selectIndex(s.index,!1);else if(s.text){for(var i=0;i<this.options.length;i++)if(this.options[i].text==s.text){this.settings.selectionIndex=i,this._selectIndex(i);break}}else if(s.value)for(var i=0;i<this.options.length;i++)if(this.options[i].value==s.value){this.settings.selectionIndex=i,this._selectIndex(i);break}},enable:function(t){var s=t[0];s?this._enable():this._disable()},isDisabled:function(){return this.settings.disabled},setItemsSource:function(t){var s=this.settings.disabled;this._unbindListItems(),this.options=t[0],this._bindListItems(s)}},t.fn[n]=function(s){var i=t(this).data(n);return i&&0!=s.indexOf("_")?i[s](Array.prototype.slice.call(arguments,1)):"object"!=typeof s&&s?void t.error("Wrong call to "+n):(i=new d(this,s),t(this).data(n,i),t(this))}}(jQuery);